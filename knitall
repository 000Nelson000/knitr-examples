#!/bin/bash

for i in `ls | grep -E '^[0-9].*\.R(nw|md|tex|html|rst)$'`
do
  prefix=${i%.*}-
  Rscript -e "library(knitr); opts_chunk\$set(cache.path='cache/$prefix', fig.path='figure/$prefix'); knit('$i')"
  if [ ${i: -4} == ".Rmd" ]
  then
    out=${i%.Rmd}.md
    echo -e "\nSee https://github.com/yihui/knitr-examples/$out for the output.\n" >> $out
  fi
done

